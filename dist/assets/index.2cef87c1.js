(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function e(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();const g=async a=>{const t="55afc51835d44bcd84d223818241608";try{const o=await fetch(`https://api.weatherapi.com/v1/search.json?lang=pt&key=${t}&q=${encodeURIComponent(a)}`);if(!o.ok)throw new Error("Erro ao buscar cidades");const e=await o.json();return e.length===0?(window.alert("Nenhuma cidade encontrada"),[]):e}catch(o){return console.error("Erro:",o),window.alert("Erro ao buscar cidades. Tente novamente mais tarde."),[]}},v=async a=>{const t="55afc51835d44bcd84d223818241608";try{const o=await fetch(`https://api.weatherapi.com/v1/current.json?lang=pt&key=${t}&q=${a}`);if(!o.ok)throw new Error("Erro ao buscar clima da cidade");const e=await o.json();return{temp:e.current.temp_c,condition:e.current.condition.text,icon:e.current.condition.icon,country:e.location.country,name:e.location.name,url:a}}catch(o){console.error("Erro:",o),window.alert("Erro ao buscar clima. Tente novamente mais tarde.")}},k=async a=>{const t="55afc51835d44bcd84d223818241608";try{const e=await fetch(`https://api.weatherapi.com/v1/forecast.json?lang=pt&key=${t}&q=${a}&days=${7}`);if(!e.ok)throw new Error("Erro ao buscar previs\xE3o do tempo");return(await e.json()).forecast.forecastday.map(i=>({date:i.date,maxTemp:i.day.maxtemp_c,minTemp:i.day.mintemp_c,condition:i.day.condition.text,icon:i.day.condition.icon}))}catch(e){console.error("Erro:",e),window.alert("Erro ao buscar previs\xE3o do tempo. Tente novamente mais tarte")}};function r(a,t,o=""){const e=document.createElement(a);return e.classList.add(...t.split(" ")),e.textContent=o,e}function b(a){const{date:t,maxTemp:o,minTemp:e,condition:n,icon:c}=a,i=new Date(t);i.setDate(i.getDate()+1);const s=i.toLocaleDateString("pt-BR",{weekday:"short"}),d=r("div","forecast"),f=r("p","forecast-weekday",s),h=r("span","forecast-temp max","max"),y=r("span","forecast-temp max",`${o}\xBA`),E=r("span","forecast-temp min","min"),m=r("span","forecast-temp min",`${e}\xBA`),l=r("div","forecast-temp-container");l.appendChild(h),l.appendChild(E),l.appendChild(y),l.appendChild(m);const p=r("p","forecast-condition",n),u=r("img","forecast-icon");u.src=c.replace("64x64","128x128");const w=r("div","forecast-middle-container");return w.appendChild(l),w.appendChild(u),d.appendChild(f),d.appendChild(w),d.appendChild(p),d}function C(a){const t=document.getElementById(a);for(;t.firstChild;)t.removeChild(t.firstChild)}function L(a){const t=document.getElementById("forecast-container"),o=document.getElementById("weekdays");C("weekdays"),a.forEach(e=>{const n=b(e);o.appendChild(n)}),t.classList.remove("hidden")}async function x(a){try{const t=await k(a);t&&L(t)}catch(t){console.error(`Erro ao buscar previs\xE3o para ${a}:`,t),window.alert("N\xE3o foi poss\xEDvel obter a previs\xE3o para esta cidade.")}}function B(a){const{name:t,country:o,temp:e,condition:n,icon:c,url:i}=a,s=r("li","city"),d=r("div","city-heading"),f=r("h2","city-name",t),h=r("p","city-country",o);d.appendChild(f),d.appendChild(h);const y=r("p","city-temp",`${e}\xBA`),E=r("p","city-condition",n),m=r("div","city-temp-container");m.appendChild(E),m.appendChild(y);const l=r("img","condition-icon");l.src=c.replace("64x64","128x128");const p=r("div","city-info-container");p.appendChild(m),p.appendChild(l);const u=r("button","forecast-button","Ver previs\xE3o");return u.addEventListener("click",()=>x(i)),s.appendChild(d),s.appendChild(p),s.appendChild(u),s}async function I(a){a.preventDefault(),C("cities");const o=document.getElementById("search-input").value.trim();if(!o){window.alert("Digite o nome de uma cidade");return}const e=await g(o);if(!e||e.length===0)return;const n=e.map(s=>v(s.url)),c=await Promise.all(n),i=document.getElementById("cities");c.forEach(s=>{if(s){const d=B(s);i.appendChild(d)}})}document.getElementById("search-form").addEventListener("submit",I);document.getElementById("close-forecast").addEventListener("click",()=>{document.getElementById("forecast-container").classList.add("hidden")});
